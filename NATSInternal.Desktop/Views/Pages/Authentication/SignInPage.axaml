<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:NATSInternal.Desktop.ViewModels"
             xmlns:v="using:NATSInternal.Desktop.Views"
             xmlns:c="using:NATSInternal.Desktop.Converters"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="400"
             x:Class="NATSInternal.Desktop.Views.SignInPage"
             x:DataType="vm:SignInViewModel"
             x:Name="Page"
             Background="rgb(29, 78, 216)"
             HorizontalContentAlignment="Center"
             VerticalContentAlignment="Center">
  <UserControl.Resources>
    <SolidColorBrush x:Key="SuccessBorderColor" Color="#96508050" />
  </UserControl.Resources>
  
  <!-- Container -->
  <Border Background="white" Padding="10" CornerRadius="8" Width="400">
    <StackPanel>
      <!-- Inputs -->
      <Grid RowDefinitions="Auto, Auto" ColumnDefinitions="3*,*"
            HorizontalAlignment="Stretch" VerticalAlignment="Center"
            ColumnSpacing="5" RowSpacing="5">
        <Grid.IsVisible>
          <Binding Path="HasSignedInSuccessfully"
                   Converter="{x:Static c:OneWayConverters.BoolInvertConverter}" />
        </Grid.IsVisible>
        
        <!-- UserName -->
        <v:FormField Grid.Row="0" Grid.Column="0"
                     ErrorCollection="{Binding Errors, Mode=OneWay}"
                     ErrorPropertyPath="UserName">
          <TextBox Text="{Binding UserName}" Watermark="Tên tài khoản"
                   Classes="{Binding Errors, Converter={StaticResource ErrorCollectionToErrorMessageConverter}, ConverterParameter=UserName}">
            <TextBox.Classes>
              
              <Binding Path="Errors" 
                       Converter="{StaticResource ErrorCollectionToInputClassesConverter}"
                       ConverterParameter="UserName"/>
            </TextBox.Classes>
          </TextBox>
        </v:FormField>
        
        <!-- Password -->
        <v:FormField Grid.Row="1" Grid.Column="0"
                     ErrorCollection="{Binding Errors, Mode=OneWay}"
                     ErrorPropertyPath="Password">
          <TextBox PasswordChar="*" Text="{Binding Password}" Watermark="Mật khẩu">
            <TextBox.Classes>
              <Binding Path="Errors" Converter="{StaticResource ErrorCollectionToInputClassesConverter}" />
            </TextBox.Classes>
          </TextBox>
        </v:FormField>
        
        <!-- SignInButton -->
        <Button Grid.Row="0" Grid.Column="1" Grid.RowSpan="2"
                Command="{Binding SignInCommand}"
                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
                Cursor="Hand">
          <TextBlock TextWrapping="WrapWithOverflow" TextAlignment="Center">
            <TextBlock.Text>
              <Binding Path="IsSigninIn"
                       Converter="{StaticResource BoolToStringConverter}"
                       ConverterParameter="Đang đăng nhập, Đăng nhập" />
            </TextBlock.Text>
          </TextBlock>
        </Button>
      </Grid> 
      
      <!-- SignedInSuccessfullyAnnouncement -->
      <Border Background="rgba(100, 255, 100, 0.25)" Padding="10, 30"
              BorderBrush="{StaticResource SuccessBorderColor}" BorderThickness="1" CornerRadius="8"
              IsVisible="{Binding HasSignedInSuccessfully}">
        <TextBlock TextAlignment="Center" Foreground="Green">
          Đăng nhập thành công
        </TextBlock>
      </Border>
    </StackPanel>
  </Border>
</UserControl>